\documentclass{article}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{enumitem}
\usepackage{xcolor}
\geometry{margin=1in}
\setlength{\parskip}{1em}

\title{\Huge Software Sustainability Audit\\[2pt]\Large\ttfamily {{ repo_name }}}
\author{Automated Static Auditor}
\date{\today}

\begin{document}\maketitle

% -----------------------------------------------------------
\section*{Project Summary}
\begin{itemize}[leftmargin=*]
  \item \textbf{Name}: \texttt{{ repo_name }}
  {% if repo_url %}\item \textbf{URL}: \url{{ repo_url }}{% endif %}
  \item \textbf{Purpose (AI-inferred)}:\\
        {{ purpose | default("N/A", true) }}
\end{itemize}

% -----------------------------------------------------------
\section*{Scorecard}
\begin{center}
\begin{tabular}{lr}
\textbf{Grade} (A+++ best) & \color{blue}\bfseries {{ grade }}\\
\textbf{Numeric score} & {{ score }} / 100\\
Total lines of code & {{ digest.total_loc }}\\
\end{tabular}
\end{center}

% -----------------------------------------------------------
\section*{Language Mix}
Dominant language: \texttt{{ dominant_lang }}
\begin{itemize}[leftmargin=*]
  {% for lang,n in languages.items() %}
    \item {{ lang }} – {{ n }} LOC
  {% endfor %}
\end{itemize}

% -----------------------------------------------------------
\section*{External APIs Detected}
{% if apis_used %}{{ apis_used|join(", ") }}{% else %}None detected.{% endif %}

% -----------------------------------------------------------
\section*{Secrets Scan}
{% if secrets_found %}
  \color{red}\textbf{Potential secrets committed!}
{% else %}
  No obvious secrets in revision.
{% endif %}

% -----------------------------------------------------------
\section*{Energy Model}
Std-dev: {{ "%.2f"|format(energy_stdev) }} kWh \quad
Median: {{ "%.2f"|format(energy_profile|map('float')|list|median) }} kWh
\begin{center}
  \includegraphics[width=.85\linewidth]{ {{ energy_plot }} }
\end{center}
\begin{itemize}[leftmargin=*]
  {% for u,e in energy_profile.items()|sort %}
    \item {{ u }} users $\rightarrow$ {{ "%.2f"|format(e) }} kWh / day
  {% endfor %}
\end{itemize}

% -----------------------------------------------------------
\section*{Hardware Profile (target)}
\begin{itemize}[leftmargin=*]
  \item CPU: {{ hardware.cpu }}
  \item GPU: {{ hardware.gpu }}
  \item RAM: {{ hardware.ram_gb }} GB
  \item Idle draw: {{ hardware.kwh_per_hour }} kWh/h
\end{itemize}

% -----------------------------------------------------------
\section*{Container Footprint}
\begin{itemize}[leftmargin=*]
  \item Estimated RAM: {{ docker_stats.estimated_ram_mb }} MB
  \item Estimated Disk: {{ docker_stats.estimated_disk_mb }} MB
\end{itemize}

% -----------------------------------------------------------
\section*{Top Warnings}
\begin{enumerate}[leftmargin=*]
  {% for w in warnings[:10] %}\item {{ w }}{% endfor %}
  {% if warnings|length == 0 %}\item No critical warnings – great job!{% endif %}
\end{enumerate}

% -----------------------------------------------------------
\section*{Security Findings}
{% if security %}
  \begin{itemize}[leftmargin=*]{% for s in security %}\item {{ s }}{% endfor %}\end{itemize}
{% else %}
  No vulnerabilities detected.
{% endif %}

% -----------------------------------------------------------
\section*{Test Coverage}
Files with tests: {{ coverage.test_files }} \\
Python files analysed: {{ coverage.total_py }} \\
Estimated coverage: {{ "%.1f"|format(coverage.coverage_percent) }} \%

% -----------------------------------------------------------
\section*{Detected Code Smells}
{% if smells %}
  \begin{itemize}[leftmargin=*]{% for m in smells %}\item {{ m }}{% endfor %}\end{itemize}
{% else %}
  No obvious smells detected.
{% endif %}

% -----------------------------------------------------------
\section*{Important Note}
All energy numbers are \emph{first-order estimates}.
Embodied and operational emissions were interpreted through the lens of the
“Kaya for Computer Architects” model \cite{eeckhout_kaya_2022}.
Large-language-model reasoning was used to infer project purpose and context.

\end{document}
